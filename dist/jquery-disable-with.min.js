$(document).ready(function(){$("*[data-disable-with]").each(function(){var submitButton=$(this);var isButton=submitButton.is("button");var value=submitButton.attr("data-disable-with");var prevalue="";if(isButton){prevalue=submitButton.html()}else{prevalue=submitButton.val()}var firstForm=submitButton.parents().filter("form").first();firstForm.on("submit",function(){submitButton.attr("disabled","disabled");if(isButton){submitButton.html(value)}else{submitButton.val(value)}});firstForm.bind("invalid-form.validate",function(){setTimeout(function(){submitButton.removeAttr("disabled");if(isButton){submitButton.html(prevalue)}else{submitButton.val(prevalue)}},1)})})});